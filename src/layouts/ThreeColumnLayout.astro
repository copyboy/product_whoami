---
import BaseLayout from './BaseLayout.astro';
import Navigation from '@components/Navigation.astro';
import Sidebar from '@components/Sidebar.astro';
import MobileNav from '@components/MobileNav.astro';

export interface Props {
  title?: string;
  description?: string;
  image?: string;
  article?: boolean;
  toc?: {
    depth: number;
    slug: string;
    text: string;
  }[];
}

const { title, description, image, article, toc } = Astro.props;
---

<BaseLayout title={title} description={description} image={image} article={article}>
  <div class="flex flex-col min-h-screen">
    <!-- 顶部导航栏 - 在所有设备上显示 -->
    <Navigation class="z-50" />

    <div class="flex flex-1 relative pt-16">
      <!-- Mobile Navigation (shown only on small screens) -->
      <MobileNav />

      <!-- Main Content -->
      <main class="flex-1 w-full px-4 mx-auto max-w-4xl py-8">
        <slot />
      </main>

      <!-- Right Sidebar (hidden on mobile and tablet) -->
      <Sidebar class="hidden xl:block xl:w-72 shrink-0 fixed right-0 top-16 bottom-0 overflow-y-auto" toc={toc} />
    </div>
  </div>
</BaseLayout>